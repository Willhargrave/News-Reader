(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8981:(e,t,s)=>{Promise.resolve().then(s.bind(s,6622))},6622:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>P});var r=s(5155),a=s(2115),n=s(468),o=s(6793),l=s.n(o),i=s(8173),c=s.n(i),d=s(2615),u=s(7113),p=s(5689),h=s(2778),m=s(8356),y=s(864),x=s(6046);let b=(e,t)=>{switch(t.type){case"SET_DEFAULT":{let s=e.defaultCount,r=t.payload;return{...e,defaultCount:r,globalCount:r,feedCounts:Object.fromEntries(Object.entries(e.feedCounts).map(e=>{let[t,a]=e;return[t,a===s?r:a]}))}}case"UPDATE_GLOBAL":{let s=t.payload,r=e.globalCount;return{...e,globalCount:s,feedCounts:Object.fromEntries(Object.entries(e.feedCounts).map(e=>{let[t,a]=e;return[t,a===r?s:a]}))}}case"UPDATE_SINGLE":return{...e,feedCounts:{...e.feedCounts,[t.payload.feedId]:t.payload.value}};case"SELECT_FEEDS":return{...e,selectedFeeds:t.payload};case"RESET_FEED_COUNTS":return{...e,feedCounts:{}};case"REMOVE_SINGLE":{let{[t.payload]:s,...r}=e.feedCounts;return{...e,feedCounts:r}}default:return e}},f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,[t,s]=(0,a.useReducer)(b,{defaultCount:e,globalCount:e,feedCounts:{},selectedFeeds:[]});return{state:t,dispatch:s,getCountForFeed:e=>{var s;return null!==(s=t.feedCounts[e])&&void 0!==s?s:t.globalCount}}},g=(0,a.createContext)(void 0),w=e=>{let{children:t,initialDefault:s}=e,n=f(s),{dispatch:o,state:l}=n;return(0,a.useEffect)(()=>{o({type:"SET_DEFAULT",payload:s,selectedFeeds:l.selectedFeeds})},[s,o,l.selectedFeeds]),(0,r.jsx)(g.Provider,{value:n,children:t})},j=()=>{let e=(0,a.useContext)(g);if(!e)throw Error("useFeedCountsContext must be used within a FeedCountsProvider");return e};function v(e){var t;let{isOpen:s,onClose:o}=e,{data:l}=(0,d.useSession)(),{theme:i}=(0,u.D)(),c=(0,x.useRouter)(),{state:p,dispatch:h}=j(),[m,b]=(0,a.useState)(!1),[f,g]=(0,a.useState)(!1),w=async()=>{try{(await fetch("/api/delete-user",{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok?(await (0,d.signOut)(),c.push("/")):console.error("Failed to delete user")}catch(e){console.error("Error deleting user:",e)}},v=async()=>{try{(await fetch("/api/update-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({defaultArticleCount:p.defaultCount})})).ok?o():console.error("Error updating settings")}catch(e){console.error("Error updating settings:",e)}},k=async()=>{m?(await (0,d.signOut)(),c.push("/")):(b(!0),setTimeout(()=>b(!1),3e3))},N=async()=>{f?w():(g(!0),setTimeout(()=>g(!1),3e3))};return(0,r.jsx)(n.e,{appear:!0,show:s,as:a.Fragment,children:(0,r.jsx)(y.lG,{as:"div",className:"fixed inset-0 z-10 overflow-y-auto",onClose:o,children:(0,r.jsxs)("div",{className:"min-h-screen px-4 text-center",children:[(0,r.jsx)(n.e,{as:a.Fragment,show:s,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)("div",{className:"fixed inset-0 bg-black opacity-30"})}),(0,r.jsx)("span",{className:"inline-block h-screen align-middle","aria-hidden":"true",children:"​"}),(0,r.jsx)(n.e,{as:a.Fragment,show:s,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,r.jsxs)(y.Lj,{className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left \n    align-middle transition-all transform shadow-xl rounded-2xl ".concat("dark"===i?"bg-gray-800 text-gray-100":"bg-white text-gray-900"),children:[(0,r.jsxs)(y.L3,{as:"h3",className:"text-lg font-medium leading-6",children:["User Settings for ",(null==l?void 0:null===(t=l.user)||void 0===t?void 0:t.name)||"User"]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Default Article Count"}),(0,r.jsx)("input",{type:"number",min:1,value:p.defaultCount,onChange:e=>h({type:"SET_DEFAULT",payload:Number(e.target.value),selectedFeeds:p.selectedFeeds}),className:"w-full border rounded p-2 dark:bg-gray-700 dark:text-gray-100"})]}),(0,r.jsx)("div",{className:"mt-4 flex justify-end space-x-4",children:(0,r.jsx)("button",{type:"button",onClick:v,className:"px-4 py-2 border border-blue-500 text-sm rounded hover:bg-blue-100 dark:hover:bg-blue-600",children:"Confirm"})}),(0,r.jsxs)("div",{className:"mt-6 flex justify-end space-x-4",children:[(0,r.jsx)("button",{type:"button",onClick:k,className:"px-4 py-2 border border-gray-500 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-600 ".concat(m?"bg-red-800 text-white":"bg-transparent text-red-500"),children:m?"Confirm Logout":"Logout"}),(0,r.jsx)("button",{type:"button",onClick:N,className:"px-4 py-2 border border-red-500 text-sm rounded hover:bg-red-100 dark:hover:bg-red-600 ".concat(f?"bg-red-800 text-white":"bg-transparent text-red-500"),children:f?"Confirm Delete":"Delete Account"})]})]})})]})})})}function k(){let{data:e}=(0,d.useSession)(),{theme:t,setTheme:s}=(0,u.D)(),[n,o]=(0,a.useState)(!1),[l,i]=(0,a.useState)(!1);return(0,a.useEffect)(()=>o(!0),[]),(0,r.jsxs)("header",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Just The News"}),(0,r.jsx)("button",{onClick:()=>s("dark"===t?"light":"dark"),children:n?"dark"===t?(0,r.jsx)(p.A,{className:"w-6 h-6 text-yellow-400"}):(0,r.jsx)(h.A,{className:"w-6 h-6 text-gray-800"}):"Toggle Mode"}),e?(0,r.jsx)("div",{className:"flex items-center space-x-4",children:(0,r.jsx)("button",{onClick:()=>i(!0),className:"focus:outline-none","aria-label":"User Options",children:(0,r.jsx)(m.A,{className:"w-8 h-8 text-gray-700 dark:text-gray-200"})})}):(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)(c(),{href:"/login",className:"px-4 py-2 border border-gray-500 text-sm rounded hover:bg-gray-100",children:"Login"}),(0,r.jsx)(c(),{href:"/register",className:"px-4 py-2 border border-gray-500 text-sm rounded hover:bg-gray-100",children:"Register"})]}),l&&(0,r.jsx)(v,{isOpen:l,onClose:()=>i(!1)})]})}function N(e){let{onFeedAdded:t,existingCategories:s}=e,[n,o]=(0,a.useState)(""),[l,i]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),[u,p]=(0,a.useState)(""),[h,m]=(0,a.useState)(!1),[y,x]=(0,a.useState)("input"),b=async e=>{e.preventDefault(),m(!0),p("");try{let e=await fetch("/api/preview-feed",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({link:n})});if(e.ok){let t=await e.json();i(t.title),d(t.category),x("preview")}else{let t=await e.json();p(t.error||"Error previewing feed")}}catch(e){console.error(e),p("Error previewing feed")}m(!1)},f=async e=>{e.preventDefault(),m(!0),p("");try{let e=await fetch("/api/add-feed",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({link:n,title:l,category:c})});if(e.ok)t(),o(""),i(""),d(""),x("input");else{let t=await e.json();p(t.error||"Error adding feed")}}catch(e){console.error(e),p("Error adding feed")}m(!1)};return(0,r.jsxs)("div",{className:"p-4 border rounded mb-4 shadow",children:["input"===y&&(0,r.jsxs)("form",{onSubmit:b,children:[(0,r.jsx)("label",{className:"block mb-2 font-bold",children:"Enter RSS Feed URL:"}),(0,r.jsx)("input",{type:"url",value:n,onChange:e=>o(e.target.value),className:"w-full p-2 border mb-2",placeholder:"https://example.com/rss",required:!0}),(0,r.jsx)("button",{type:"submit",disabled:h,className:"px-4 py-2 border rounded hover:bg-gray-100",children:h?"Loading...":"Preview Feed"}),u&&(0,r.jsx)("p",{className:"text-red-500 mt-2",children:u})]}),"preview"===y&&(0,r.jsxs)("form",{onSubmit:f,children:[(0,r.jsxs)("p",{className:"mb-2",children:["The title of your RSS feed is:"," ",(0,r.jsx)("input",{type:"text",value:l,onChange:e=>i(e.target.value),className:"border p-1",required:!0})]}),(0,r.jsxs)("p",{className:"mb-2",children:["The category of your RSS feed is:"," ",(0,r.jsx)("input",{type:"text",list:"existingCategories",placeholder:"",onChange:e=>d(e.target.value),className:"border p-1",required:!0}),(0,r.jsx)("datalist",{id:"existingCategories",children:s.map(e=>{let t=e.charAt(0).toUpperCase()+e.slice(1);return(0,r.jsx)("option",{value:t},e)})})]}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{type:"submit",disabled:h,className:"px-4 py-2 border rounded hover:bg-gray-100",children:h?"Adding...":"Confirm Add"}),(0,r.jsx)("button",{type:"button",onClick:()=>{x("input"),i(""),d(""),p("")},className:"px-4 py-2 border rounded hover:bg-gray-100",children:"Cancel"})]}),u&&(0,r.jsx)("p",{className:"text-red-500 mt-2",children:u})]})]})}function C(e){let{title:t,content:s,initiallyExpanded:o=!1}=e,[l,i]=(0,a.useState)(o);return l?(0,r.jsx)(n.e,{appear:!0,show:l,enter:"transition-all duration-300 ease-out",enterFrom:"opacity-0 transform scale-95",enterTo:"opacity-100 transform scale-100",leave:"transition-all duration-300 ease-in",leaveFrom:"opacity-100 transform scale-100",leaveTo:"opacity-0 transform scale-95",children:(0,r.jsxs)("div",{className:"p-4 mb-6 border rounded shadow",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:t}),(0,r.jsx)("button",{type:"button",onClick:()=>i(!1),className:"text-2xl text-blue-500 hover:text-blue-700",title:"Minimize explanation",children:"–"})]}),(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)("p",{style:{whiteSpace:"pre-line"},children:s})})]})}):(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{type:"button",onClick:()=>i(!0),className:"text-2xl text-blue-500 hover:text-blue-700",title:"Show explanation",children:"+"})})}function S(e){let{initiallyExpanded:t=!1}=e;return(0,r.jsx)(C,{title:"How to Add a Feed",content:"To manually add a new RSS feed, enter the URL of the feed in the input field and click \"Preview Feed\". The system will fetch the feed details (title and category) so you can confirm or edit them. Once confirmed, the feed will be added to your personalized feed list. \n  Note: RSS feed URLs typically end with /rss, /feed, or .xml and must be in XML format. If your link doesn't follow this pattern, double-check it to ensure it's a valid RSS feed URL.",initiallyExpanded:t})}function E(e){let{refreshFeeds:t,setSelectedFeeds:s,selectedFeeds:o,feed:l}=e,{data:i}=(0,d.useSession)(),[c,u]=(0,a.useState)(!1),{dispatch:p,getCountForFeed:h,state:m}=j(),y=h(l.link.toLowerCase()),x=async(e,r)=>{let a=await fetch("/api/user-feeds",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedId:e})});a.ok?(t(),s(e=>e.filter(e=>e!==r)),p({type:"REMOVE_SINGLE",payload:r.toLowerCase()})):console.error("Error removing feed:",(await a.json()).error)},b=(e,t)=>{let r=e.toLowerCase();s(e=>t?[...e,r]:e.filter(e=>e!==r)),t&&p({type:"UPDATE_SINGLE",payload:{feedId:r,value:m.globalCount}})};return(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsxs)("label",{className:"flex items-center font-bold space-x-1 mb-2",children:[(0,r.jsx)("input",{type:"checkbox",value:l.link,checked:o.includes(l.link),onChange:e=>b(l.link,e.target.checked),className:"mr-2 cursor-pointer"}),(0,r.jsx)("span",{className:"cursor-default",children:l.title})]}),i&&l.id&&(0,r.jsx)("button",{type:"button",onClick:()=>{c?(x(l.id,l.link),u(!1)):(u(!0),setTimeout(()=>u(!1),3e3))},className:"text-sm ml-2 border rounded px-2 py-1 ".concat(c?"bg-red-800 text-white":"bg-transparent text-red-500 hover:bg-red-100"),children:c?"Confirm Delete":"Remove"}),o.includes(l.link)&&(0,r.jsx)(n.e,{enter:"transition-all duration-700",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity duration-700",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"range",min:1,max:20,value:y,onChange:e=>{let t=Number(e.target.value);p({type:"UPDATE_SINGLE",payload:{feedId:l.link.toLowerCase(),value:t}})},className:"w-32 transition-all duration-400 ease-in-out",title:"Stories from this feed"}),(0,r.jsx)("span",{children:y})]})})]},l.link)}function T(e){let{setSelectedFeeds:t,selectedFeeds:s,groupedFeeds:o,categoryName:l,isAllSelected:i,feedsInCategory:c,refreshFeeds:d,collapse:u,state:p}=e,[h,m]=(0,a.useState)(!1),{dispatch:y}=j();(0,a.useEffect)(()=>{u&&m(!1)},[u]);let x=(e,s)=>{let r=(o[e]||[]).map(e=>e.link.toLowerCase());s?(t(e=>{let t=r.filter(t=>!e.includes(t));return[...e,...t]}),r.forEach(e=>{y({type:"UPDATE_SINGLE",payload:{feedId:e,value:p.globalCount}})})):t(e=>e.filter(e=>!r.includes(e)))};return(0,r.jsxs)("details",{open:h,className:"mb-4 cursor-pointer",onToggle:e=>{m(e.currentTarget.open)},children:[(0,r.jsx)("summary",{className:"font-bold text-lg",children:l.toUpperCase()}),(0,r.jsx)(n.e,{show:h,enter:"transition-opacity duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity duration-500",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsxs)("div",{className:"mt-2 p-4 border rounded-lg shadow",children:[(0,r.jsxs)("label",{className:"flex items-center text-sm space-x-1 mb-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:i,onChange:e=>x(l,e.target.checked),className:"mr-2 cursor-pointer"}),(0,r.jsx)("span",{children:"Select All"})]}),c.map(e=>(0,r.jsx)(E,{refreshFeeds:d,setSelectedFeeds:t,selectedFeeds:s,feed:e},e.link))]})})]})}function F(e){let{displayMode:t,setDisplayMode:s}=e;return(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("p",{className:"font-bold mb-1",children:"How would you like the articles to be displayed?"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("button",{type:"button",onClick:()=>s("grouped"),className:"px-4 py-2 rounded border transition-colors duration-200 ".concat("grouped"===t?"bg-blue-500 text-white border-blue-500":"bg-transparent text-gray-500 hover:bg-gray-100"),children:"Grouped by Feed"}),(0,r.jsx)("button",{type:"button",onClick:()=>s("interleaved"),className:"px-4 py-2 rounded border transition-colors duration-200 ".concat("interleaved"===t?"bg-blue-500 text-white border-blue-500":"bg-transparent text-gray-500 hover:bg-gray-100"),children:"Interleaved"})]})]})}function A(){let{state:e,dispatch:t}=j();return(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"globalCounter",className:"block font-bold mb-1",children:"Stories for all selected feeds:"}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{id:"globalCounter",type:"range",min:1,max:20,value:e.globalCount,onChange:e=>t({type:"UPDATE_GLOBAL",payload:Number(e.target.value)}),className:"w-1/2 transition-all duration-300 ease-in-out",title:"Set story count for all selected feeds"}),(0,r.jsx)("span",{className:"w-8 text-center",children:e.globalCount})]})]})}function L(e){let{availableFeeds:t,refreshFeeds:s,selectedFeeds:o,setSelectedFeeds:l,setArticles:i,setLoading:c,toggleLinks:d,linksVisible:u,loading:p}=e,[h,m]=(0,a.useState)(!1),[y,x]=(0,a.useState)("grouped"),[b,f]=(0,a.useState)(!1),{state:g,dispatch:w}=j(),v=async e=>{e.preventDefault(),c(!0);let t=Date.now(),s=await fetch("/api/fetch-news",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedFeeds:o,feedStoryCounts:g.feedCounts,defaultCount:g.defaultCount,displayMode:y})}),r=await s.json();if(r.error){c(!1),alert(r.error);return}if(r.articles&&r.articles.length>50){c(!1),alert("You have passed the limit of the number of stories you can generate! Please try again with less than 50");return}i(r.articles||[]);let a=Date.now()-t;a<1500?setTimeout(()=>{c(!1),l([]),w({type:"RESET_FEED_COUNTS"}),f(!0),setTimeout(()=>f(!1),100)},1500-a):(c(!1),l([]),w({type:"RESET_FEED_COUNTS"}),f(!0),setTimeout(()=>f(!1),100))},k={};return Array.isArray(t)&&t.forEach(e=>{let t=e.category||"news";k[t]||(k[t]=[]),k[t].push(e)}),(0,r.jsxs)("div",{children:[(0,r.jsx)("button",{type:"button",onClick:()=>m(e=>!e),className:"mb-4 px-4 py-2 border border-gray-500 text-sm rounded hover:bg-gray-100",children:h?"Hide Add Feed":"Add a New Feed"}),h&&(0,r.jsxs)("div",{children:[(0,r.jsx)(S,{initiallyExpanded:!0}),(0,r.jsx)(N,{onFeedAdded:()=>{s(),m(!1)},existingCategories:Object.keys(k)})]}),Object.keys(k).map(e=>{let t=k[e]||[],a=t.every(e=>o.includes(e.link.toLowerCase()));return(0,r.jsx)(T,{selectedFeeds:o,setSelectedFeeds:l,groupedFeeds:k,categoryName:e,isAllSelected:a,feedsInCategory:t,refreshFeeds:s,state:g,collapse:b},e)}),o.length>1&&(0,r.jsx)(n.e,{enter:"transition-opacity duration-700",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity duration-700",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsxs)("div",{className:"p-4 border rounded shadow-lg mb-4",children:[(0,r.jsx)(F,{displayMode:y,setDisplayMode:x}),(0,r.jsx)(A,{})]})}),(0,r.jsxs)("div",{className:"flex space-x-4 mb-4",children:[(0,r.jsx)("button",{type:"submit",onClick:v,disabled:p||0===o.length,className:"inline-block px-4 py-2 border border-gray-500 text-sm rounded ".concat(p||0===o.length?"opacity-50 cursor-not-allowed":"hover:bg-gray-100"),children:p?"Loading...":"Generate News Articles"}),(0,r.jsx)("button",{type:"button",onClick:d,className:"inline-block px-4 py-2 border border-gray-500 text-sm rounded transition-transform transform active:scale-95 active:shadow-inner ".concat(u?"bg-blue-500 text-white":"bg-transparent text-gray-500 hover:bg-gray-100"),children:"Toggle Links"})]})]})}let O=(0,a.forwardRef)((e,t)=>{let{article:s,linksVisible:n}=e,[o,l]=(0,a.useState)(!1),i=s.content.split(/\s+/),c=i.length>200,d=i.slice(0,200).join(" ")+"...",u=o||!c?s.content:d;return(0,r.jsxs)("div",{ref:t,className:"mb-6",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold",children:[s.feedTitle,": ",s.headline]}),(0,r.jsx)("p",{children:u}),c&&!o&&(0,r.jsx)("button",{onClick:()=>l(!0),className:"text-blue-500 underline mt-1 block",children:"Read more"}),c&&o&&(0,r.jsx)("button",{onClick:()=>l(!1),className:"text-blue-500 underline mt-1 block",children:"Read less"}),n&&(0,r.jsx)("p",{className:"mt-2",children:(0,r.jsx)("a",{href:s.link,target:"_blank",rel:"noreferrer",className:"text-blue-500 underline",children:"Read full article"})}),(0,r.jsx)("hr",{className:"mt-4 border-t border-gray-300"})]})});function D(e){let{articles:t,linksVisible:s,loading:a}=e;return a?(0,r.jsx)("div",{className:"flex justify-center items-center py-10",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-500"})}):(0,r.jsx)("div",{children:t.map((e,t)=>(0,r.jsx)(n.e,{appear:!0,show:!0,enter:"transition-opacity duration-700",enterFrom:"opacity-0",enterTo:"opacity-100",children:(0,r.jsx)(O,{article:e,linksVisible:s})},t))})}function R(){return(0,r.jsx)(C,{title:"How It Works",content:"Generate your personalized news feed by selecting your favorite RSS feeds from our default categories (news, sports, business, technology, climate). You can choose as many RSS feeds as you like which does impact the performance, but there is a limit of 50 total articles you can generate at one time.\n  You can select from as many RSS feeds as you'd like, and use the slider to control how many articles you want (limit of 20 for each RSS feed). By default we have links to the source website turned off but you can press the 'Toggle Links' button to enable them on.\n  Registering an account allows you to customize your feeds however you'd like. You can register with just a username and password, we don't require an email to sign up. After signing up you can click click on the user button above to adjust your default settings.",initiallyExpanded:!0})}O.displayName="ArticleItem";let _=JSON.parse('[{"title":"BBC","link":"http://feeds.bbci.co.uk/news/rss.xml","category":"news"},{"title":"Deutsche Welle","link":"https://rss.dw.com/rdf/rss-en-all","category":"news"},{"title":"The Guardian","link":"https://www.theguardian.com/uk/rss","category":"news"},{"title":"Al Jazeera","link":"https://www.aljazeera.com/xml/rss/all.xml","category":"news"},{"title":"NPR","link":"http://www.npr.org/rss/rss.php?id=1001","category":"news"},{"title":"Fox News","link":"http://feeds.foxnews.com/foxnews/latest","category":"news"},{"title":"Time","link":"http://feeds2.feedburner.com/time/topstories","category":"news"},{"title":"Yahoo News","link":"https://news.yahoo.com/rss/mostviewed","category":"news"},{"title":"BBC Sport","link":"http://feeds.bbci.co.uk/sport/rss.xml?edition=uk","category":"sport"},{"title":"ESPN","link":"http://www.espn.com/espn/rss/news","category":"sport"},{"title":"Sky Sports","link":"http://www.skysports.com/rss/12040","category":"sport"},{"title":"SI Top Stories","link":"https://www.si.com/rss/si_topstories.rss","category":"sport"},{"title":"CBS Sports","link":"http://www.cbssports.com/rss/headlines/","category":"sport"},{"title":"The Verge","link":"https://www.theverge.com/rss/index.xml","category":"technology"},{"title":"Ars Technica","link":"http://feeds.arstechnica.com/arstechnica/index","category":"technology"},{"title":"Engadget","link":"https://www.engadget.com/rss.xml","category":"technology"},{"title":"CNET","link":"https://www.cnet.com/rss/all/","category":"technology"},{"title":"CNBC Finance","link":"https://www.cnbc.com/id/15839135/device/rss/rss.html","category":"finance"},{"title":"Bloomberg Finance","link":"https://www.bloomberg.com/markets/rss","category":"finance"},{"title":"Business Insider","link":"https://www.businessinsider.com/rss","category":"finance"},{"title":"Yahoo Finance","link":"https://finance.yahoo.com/rss/topstories","category":"finance"},{"title":"MarketWatch Top Stories","link":"https://www.marketwatch.com/rss/topstories","category":"finance"},{"title":"The Guardian - Climate Change","link":"https://www.theguardian.com/environment/climate-change/rss","category":"climate"},{"title":"Climate Home News","link":"https://www.climatechangenews.com/feed/","category":"climate"},{"title":"Mongabay","link":"https://news.mongabay.com/feed/","category":"climate"},{"title":"EcoWatch","link":"https://www.ecowatch.com/rss","category":"climate"},{"title":"Carbon Brief","link":"https://www.carbonbrief.org/rss","category":"climate"}]');var U=s(9208);function P(){let{data:e}=(0,d.useSession)(),[t,s]=(0,a.useState)([]),[o,i]=(0,a.useState)([]),[c,u]=(0,a.useState)(null),[p,h]=(0,a.useState)([]),[m,y]=(0,a.useState)(!1),[x,b]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=U.A.get("linksVisible");void 0!==e&&b("true"===e)},[]);let f=(0,a.useCallback)(()=>{e?fetch("/api/fetch-feeds").then(e=>e.json()).then(e=>{s(e.feeds||[]),i([])}).catch(e=>console.error(e)):(s(_),i([]))},[e]);return(0,a.useEffect)(()=>{f()},[f]),(0,a.useEffect)(()=>{(async function(){try{let e=await fetch("/api/get-settings"),t=await e.json();console.log("Fetched settings:",t),void 0!==t.defaultArticleCount&&u(t.defaultArticleCount)}catch(e){console.error("Error fetching settings:",e)}})()},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l(),{children:(0,r.jsx)("title",{children:"Just The News"})}),(0,r.jsx)(w,{initialDefault:null!=c?c:10,children:(0,r.jsx)(n.e,{appear:!0,show:!0,enter:"transition-opacity duration-1000",enterFrom:"opacity-0",enterTo:"opacity-100",children:(0,r.jsxs)("div",{className:"min-h-screen p-8 font-sans",children:[(0,r.jsx)(k,{}),(0,r.jsx)(R,{}),(0,r.jsx)(L,{availableFeeds:t,setAvailableFeeds:s,selectedFeeds:o,setSelectedFeeds:i,setArticles:h,setLoading:y,toggleLinks:()=>{b(e=>{let t=!e;return U.A.set("linksVisible",t.toString(),{expires:30}),t})},loading:m,refreshFeeds:f,linksVisible:x}),(0,r.jsx)(D,{articles:p,linksVisible:x,loading:m})]})})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[615,328,441,517,358],()=>t(8981)),_N_E=e.O()}]);