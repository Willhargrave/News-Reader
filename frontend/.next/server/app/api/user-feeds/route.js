(()=>{var e={};e.id=855,e.ids=[855],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},11723:e=>{"use strict";e.exports=require("querystring")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},30100:(e,r,s)=>{"use strict";s.r(r),s.d(r,{patchFetch:()=>m,routeModule:()=>c,serverHooks:()=>g,workAsyncStorage:()=>f,workUnitAsyncStorage:()=>x});var t={};s.r(t),s.d(t,{DELETE:()=>p});var o=s(42706),n=s(28203),i=s(45994),u=s(39187),a=s(43219),d=s(64767),l=s(66194);async function p(e){try{console.log("DELETE endpoint reached");let r=await (0,d.getServerSession)(l.N);if(console.log("Session:",r),!r||!r.user?.name)return console.log("Not authenticated"),u.NextResponse.json({error:"Not authenticated"},{status:401});let{feedId:s}=await e.json();if(console.log("Feed ID from request:",s),!s)return console.log("No feed provided"),u.NextResponse.json({error:"No feed provided"},{status:400});let t=await a.A.user.findUnique({where:{username:r.user.name}});if(console.log("Found user:",t),!t)return console.log("User not found"),u.NextResponse.json({error:"User not found"},{status:404});let o=await a.A.userFeed.findUnique({where:{id:s}});if(console.log("UserFeed record found:",o),o&&o.userId===t.id)return console.log("Deleting user feed with id:",s),await a.A.userFeed.delete({where:{id:s}}),console.log("User feed deleted successfully"),u.NextResponse.json({message:"User feed removed"});let n=await a.A.removedFeed.findFirst({where:{userId:t.id,feedId:s}});return console.log("Existing removed feed record:",n),n||(console.log("Creating removed feed record for user:",t.id,"and feedId:",s),await a.A.removedFeed.create({data:{feedId:s,userId:t.id}}),console.log("Removed feed record created")),u.NextResponse.json({message:"Feed removed for user"})}catch(e){return console.error("Error in DELETE endpoint:",e),u.NextResponse.json({error:"Error removing feed"},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/user-feeds/route",pathname:"/api/user-feeds",filename:"route",bundlePath:"app/api/user-feeds/route"},resolvedPagePath:"/Users/willh/coding/news-display/frontend/src/app/api/user-feeds/route.ts",nextConfigOutput:"",userland:t}),{workAsyncStorage:f,workUnitAsyncStorage:x,serverHooks:g}=c;function m(){return(0,i.patchFetch)({workAsyncStorage:f,workUnitAsyncStorage:x})}},96487:()=>{},78335:()=>{},66194:(e,r,s)=>{"use strict";s.d(r,{N:()=>i});var t=s(91642),o=s(43219),n=s(34926);let i={providers:[(0,t.A)({name:"Credentials",credentials:{username:{label:"Username",type:"text"},password:{label:"Password",type:"password"}},async authorize(e){if(!e?.username||!e?.password)return null;let r=await o.A.user.findUnique({where:{username:e.username}});return r&&await (0,n.UD)(e.password,r.password)?{id:r.id,name:r.username}:null}})],session:{strategy:"jwt"},secret:process.env.NEXTAUTH_SECRET}},43219:(e,r,s)=>{"use strict";s.d(r,{A:()=>o});let t=require("@prisma/client"),o=global.prisma||new t.PrismaClient({log:["query"]})}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[638,452,926,712],()=>s(30100));module.exports=t})();